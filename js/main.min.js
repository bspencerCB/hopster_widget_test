!function(t,i){require(["jquery"],function(s){t.HOPSTER=t.HOPSTER||{},HOPSTER.Coupons={init:function(){var i=t.location.search.substring(1).split("&")
i[0].search(".rss")==-1?this.url=i[0]:this.url=i[0].split(".rss").join(".json"),this.couponList=s("#hpcpn-cb-coupon-slider-list"),this.btnNext=s("#hpcbn-cb-show-next"),this.btnPrev=s("#hpcpn-cb-show-prev"),this.qtyToDisplay=s(t).width()>=265?3:1,this.getCoupons(),this.positionArrows(),this.bindEvents()},bindEvents:function(){this.btnNext.on("click",s.proxy(this.showNext,this)),this.btnPrev.on("click",s.proxy(this.showPrev,this))},getCoupons:function(){s.getJSON(this.url,function(t){var i=t.Coupons
s.each(i,function(t,i){var n=s("<p>",{class:"hpcpn-cb-partner",text:i.partner}),e=s("<a />",{class:"hpcpn-cb-savings",href:i.link,target:"_blank",text:"$"+i.savings+" Off"}),a=s("<a />",{class:"bg-img hpcpn-cb-img-container",href:i.link,target:"_blank",style:"background-image:url("+i.image_url+")"}),o=s("<li>",{class:t<this.qtyToDisplay?"active":"is-hidden"}).addClass("text-center").attr("data-id",t).append(a).append(e).append(n)
s("#hpcpn-cb-coupon-slider-list").append(o)}.bind(this)),s("#hpcpn-cb-coupon-slider-list").after('<div id="hpcpn-cb-btn-print" class="text-center"><a href="'+t.meta.public_url+'" target="_blank">Print Coupons</a></div>')}.bind(this))},positionArrows:function(){topPx=(i.documentElement.clientHeight-30)/2,s(".navigate").css("top",topPx),this.btnNext.css("right",2),this.btnPrev.css("left",2)},showNext:function(t){t.preventDefault()
var i=this.couponList.find(".active"),s=this.couponList.find("li").length-1,n=parseInt(i.last().attr("data-id"))+1
i.removeClass("active").addClass("is-hidden")
var e=n>s?0:n
if(this.qtyToDisplay>1)var a=this.couponList.find("li").slice(e,e+3)
else var a=this.couponList.find("li[data-id="+e+"]")
a.removeClass("is-hidden").addClass("active")},showPrev:function(t){t.preventDefault()
var i=this.couponList.find(".active"),s=this.couponList.find("li"),n=s.length,e=parseInt(i.first().attr("data-id"))-1
if(i.removeClass("active").addClass("is-hidden"),this.qtyToDisplay>1)var a=n%3==0?3:n%3,o=e<0?s.slice(n-a):s.slice(e-2,e+1)
else{targetId=e<0?n-1:e
var o=this.couponList.find("li[data-id="+targetId+"]")}o.removeClass("is-hidden").addClass("active")}},HOPSTER.Coupons.init()})}(window,document)
